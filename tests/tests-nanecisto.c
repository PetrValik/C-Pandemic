// #desc: Testy nanečisto
// #name: nanecisto
#include "cut.h"
#include "mainwrap.h"
#include "utils_for_tests.h"

#include <stdlib.h>

#define ARGS(...)                         \
    char *argv[] = { __VA_ARGS__, NULL }; \
    int argc = (sizeof(argv) / sizeof(*argv)) - 1

static void set_up()
{
    ASSERT(!string_to_file("agents_sample.csv", ("1;4-1-3;1;0.5;0\n"
                                                 "2;5-1-3;1;0.5;0\n"
                                                 "3;5;1;0.2;0\n"
                                                 "4;4;0;0.2;1\n"
                                                 "5;5-2-3-1-3;0;0.5;1\n"
                                                 "\n")));
    ASSERT(!string_to_file("worlds_village.csv", ("1;Robota;0.8\n"
                                                  "2;Koscel;1.0\n"
                                                  "3;Karcma;1.5\n"
                                                  "4;Domov1;0.4\n"
                                                  "5;Domov2;0.4\n"
                                                  "\n")));

    ASSERT(!string_to_file("agents_bigger.csv", ("0;84-58-8-78-81-40-76-12-0-34-52-44-35-58-94-83-58-6-27-98-46-36-26-20-35-6-19-37-27-86-45-64-25-47-3-57-28;0;0.4054658106336939;1\n"
                                                 "1;14-75-96-17-81-78-37-82-2-6-54-68-49-84;1;0.053657274163536606;1\n"
                                                 "2;35-20-72-15-59-59-10-88-66-72-99-65-83-9-72-64-18-78-3-96-30-95-80-2-19-21-97-72-86-47-53-18-9-32-85-6-45-95-23-46-53-72-51-63-86-79-24;0;0.7523273208196184;1\n"
                                                 "3;7-30-47;1;0.4363076670407613;0\n"
                                                 "4;41-50-21-60-49-84-73-55-5-43-65-12-57-51-38-61-70-16-79-86-6-38-26-64-59-9-7-18-43-81-24-47-57-22-70-5;1;0.7003661740980682;0\n"
                                                 "5;12-32-83-23-51-83-64-8-13-12-9-6-15-83-63-27-36-21;1;0.9040162149749638;0\n"
                                                 "6;8-76-9-95-80-29-62-48-4-15-37-29-5-1-88-17-94-87-66-35-56-91-65-29-88-81-28-11-97-96-63-50-46-72-43-32-81-38-99-71-16-29-15-39-9-61;0;0.30787084403285747;1\n"
                                                 "7;60-15-10-39-47-60-16-78-11-64-17-8-61-37-1-62-11-6-32-56-9-6-18-76-79-62-56-30;0;0.4857824809945466;1\n"
                                                 "8;10-30-75-98-69-93-80-72-81-50-40-87-65-62-66-72-22-64-24-54-17-90-44-12-32-72-67-17-71;1;0.47798278948381545;0\n"
                                                 "9;20-91-35-64-36-35-95-51-33-65-60-22-6-82-5-15-17-77-72-87-32-9-39-91-87-6-92-48-65-19-36-70-58-71-13-4-38-34-32-46-67-49-17-49-27-6-78-79;1;0.7204358772141435;1\n"
                                                 "10;81-21-90-66-80-85-90-51-49-87-50-45-91-9-78-15-59-9-65-68;0;0.0857402866128727;1\n"
                                                 "11;90-75-50-66-8-12-71-12-31-66-44-96-29-88-18-11-86-21-18-69-70-87-74-9-29-89-26-54-55-84-39-30-76-21-38-65-66-39-43-18-61;1;0.7475978816466833;1\n"
                                                 "12;98-4-64-57-79-59-81-36-14-83-29-55-96-34-50-10-19-1-64-76-42-36-55-13-26-8-47-65-45-67-14-51-21-34-21-67-47-82-26-15-32-31-61-50-44;1;0.3730125055408229;1\n"
                                                 "13;78-20-36-98-66-74-3-87-9-80-77-75-63-69-72;1;0.6112003961691306;1\n"
                                                 "14;8-71-69-20-35-4-98-52-17-70-85-41-0-35-83-32-8-75-20-32-49-81-30-58-77-81-95-60-22-68-77-85-77-77-35-63-78-62-48-54-71-28-51-79-77-44-59-89;1;0.5059557495457263;1\n"
                                                 "15;12-1-7-53-39-89-29-13-75-3-50-19-27-92-7-36-18-16-6-33-13-42-16-82-65-34-94-93-93-3-73-6-91-55-11-10-83-79-3-36-21-79;0;0.5805791546691733;0\n"
                                                 "16;82-57-43-11-98-52-14-29-37-14-21-44-86-29-97-37-28-16-90-17-40-99-95-50-71-51-7-81-3-41-86-2-24;0;0.19900879625194268;1\n"
                                                 "17;31-38-25-8-72-62-23-44-81-42-77-6-21-45-96-38-17-74-25-18-17-69-73-51-67-99-44;0;0.31186782803144053;0\n"
                                                 "18;43-63-51-91-34-49-14-72-26-80-25-4-4-95-20-49-73-47-8-99-16-56-9-1-26-95-85-69-52-40-94-4;1;0.7219257527043497;1\n"
                                                 "19;59-31-13-31-44-62-31-61-16-31-1-95-27-56-61-51;0;0.1008492872553427;1\n"
                                                 "20;18-74-2-11-80-10-24;1;0.16815695383853757;1\n"
                                                 "21;26;0;0.3215038030243168;1\n"
                                                 "22;77-20-26-57-34-70-19-63-45-37-43-70-21-67-85-93-80-9-89-28-73-35-82-59-52-68-0-21-22-26-33-12-9-88-73-10-11-83-32-49-61-11-97-95-88-13-76-28;0;0.048752473513537065;0\n"
                                                 "23;37-88-99-43-33-40-14-48-21-18-71;1;0.7113250328519031;0\n"
                                                 "24;64-44-24-66-4-99-18-52-85-57-17-10-93-56-99-18-53-59-76-24-31-18-2-85-17-34-67-52-55-14;1;0.4407468997970093;0\n"
                                                 "25;70-32-49-29-16-65-0-39-19-56-53-53-59-85-34-24-23-91-74-34-96-94-88-2-73-28-36-72-72-9-40-15-12-98-62-17-43-39-48-22-64;0;0.18595253255306887;0\n"
                                                 "26;37-13-10-64-10-18-87-98-68-23-44-37-24-76-53-36-14-68-75;0;0.4024481711585335;0\n"
                                                 "27;71-68-69-83-95-8-27-68-17-39-68-78-78-99-2-32;1;0.7904948534116937;0\n"
                                                 "28;66-31-50-91-95;0;0.9073166720420055;1\n"
                                                 "29;26-50-42-41-5-46-76-76-19-20-78-33-20-52-87-50-88-46-39-65-86-28-71-23-75-16-86-72-88;1;0.9972636176833022;0\n"
                                                 "30;66-64-53-50-65-57-78-26-84-92-41-13-40-19-87-58-69-58-0-6-95-98-72-98-85-84-82;0;0.3665978242495267;0\n"
                                                 "31;67-38-51;1;0.971553794297229;1\n"
                                                 "32;43-26-41-69-32-51-67-13-18-30-94-50-34-8-22-54-62-94-23-81-77-83;1;0.2654920613458187;0\n"
                                                 "33;31-0-34-3-68-83-75-89-44-97-4-70-29-49-74-35-71-96-15-1-86-13-11-21-22-83-53-78-72-21-95-43-20-16-21-92;1;0.08630427594494627;0\n"
                                                 "34;93-46-41-38-6-21-69-56-69-12-26-31-44;0;0.6055855555799892;0\n"
                                                 "35;92-52-15-83-54-65-94-40-44-89-19-30-53-30-78-85-87-30-54-20-72-12-80-91-37-60-57-81-4-46-18-88-14-86-27-51-38-59-13-1-35-78;0;0.5045599352089897;1\n"
                                                 "36;23-27-17-60-87-10-66-29-83-23-79-4-59-23-72-80-93-36-57-96-2-0-61-62-84-25-95-74-87-69;1;0.19664663846836206;0\n"
                                                 "37;36-41-21-12-35-49-85;1;0.8567793673030625;0\n"
                                                 "38;52-76-63-61-89-43-38-82-21-13-44-50-25-83-63-72-79-32-1-11-71-46-35-7-46-34-88-95-35-19;0;0.4755596452586279;1\n"
                                                 "39;83-28-22-84-28-72-61-15-76-94-70-77-86-73-96-77-43-87;0;0.3514656552336315;1\n"
                                                 "40;3-67-89-97-74-19;1;0.44516021896292657;1\n"
                                                 "41;10-12-84-82;1;0.5500949089156045;0\n"
                                                 "42;46-49-35-50-40;1;0.7810995772029596;1\n"
                                                 "43;27-43-7-27-66-80-96-69-34-54-36-87-15-32-91-33-68-0-96-85-27-90-84-7-73-33-61-83-16-90-42-57-75;0;0.6211129502070243;1\n"
                                                 "44;24-99-40-79-40-2-51-54-72-77-65-56-37-87-86-8-60-94-16-24-11-72-33-80-67-69-35-49-89-58-42-15-75-27-75-48-14-10-56-26-20-76-76-38-74-54-41-67;1;0.4670446637650424;1\n"
                                                 "45;3-9-45-69-84-3-66-19-60-93-38-38-56-72-25-31-19;0;0.6496753525585307;1\n"
                                                 "46;86-65-89-4-63-56-80-9-99-21-67-47-55-1-43-28-76-8-63-0-28-87-19-67-41-30-4-86-13-99-34-13-78-32-8-68-90;0;0.9003614776213298;0\n"
                                                 "47;72-56-36-4-90-25-73-16-19-29-18-64-78-73-95-57-66-88-27-69-7-70-42-55-88-28-20-9-65-49-99-54-29-84-24-10-25-33-17-4-4-33-36-62-37-0-40;1;0.18871606871476032;1\n"
                                                 "48;18-97-19-9-28-21;1;0.050948695067434935;0\n"
                                                 "49;40-41-37-68-4-19-22-15;1;0.9920773444938558;0\n"
                                                 "50;56-95-90-33-86-31-13-77-16-14;1;0.9854156922697139;0\n"
                                                 "51;10-9-61-14-46-30-40-33-64-7-53-21-86-57-80-76-82-84-88-11-35-68-21-28-34-39-86;0;0.31258988457933745;0\n"
                                                 "52;62-40-40-40-84-46-62-73-70-0-45-63-50-88;1;0.2329243684100052;1\n"
                                                 "53;57-86;1;0.6557989489784956;1\n"
                                                 "54;82;0;0.6502766845089437;0\n"
                                                 "55;46-62-99-81-34-45-38-40-76-49-52-1-38-39-4-31-79-62-34-84-18-40-66-30-50-4-6-73-41-42-51-91-53-60-44-64-59-61-41-37-92-53-98;1;0.0339186278271405;0\n"
                                                 "56;98-89-17-57-58-60-15-66-67-85-18-27-46-48-23-18-46-97-23-37-60-3-91-41-48-49-49-30-10-66-87-61-49-12-0-57-21-15-70-69-52-70-18-2-66-84-12-17-29-65;1;0.00472126846726606;1\n"
                                                 "57;23-70-49-52-10-54-53-75-48-83-21-7-23-2-55-78-55-15-13-90-17-40-53-16-52-97-74-85-53-11-17-26-1-43-91-56-62-79-5-71-30-85-37-8-12-44-36-63;1;0.8506447896323249;0\n"
                                                 "58;17-68-82-35-50-67-30-1-72-16-86-10-9-1-80-15-1-54-31-97-75-73-54-67-62-36-45-69-71-54-67-38-35-27-15-75-88-88-83-90-73-15-97-68-48-41;0;0.7994582945344364;1\n"
                                                 "59;85-38-20-96-11-80-28-89-84-17-16-5-2-29-19-67-76-19-10-68-74-47-7-14-54-99-64-60-32-81-49-48;0;0.8951345754865916;0\n"
                                                 "60;26-30-4-21-36-68-92-23-20-18-0-78-18-78-8-34-98-16-81-73-65-30-0-21-34-7;0;0.8912371120812504;0\n"
                                                 "61;95-52-32-8-38-57-25-40-52-8-29-81-95-46-80-39-43-88-27-6;1;0.794015528533331;0\n"
                                                 "62;65-57-29-54-96-88-85-3-38-6-28-19-79-81-35-12-83-16-45-8-40-19-73-94-52-1-78-73-11-66-40-47-36-67-36-42-26-94-44-28-87-6-99-62-3-65;0;0.6144624429737512;1\n"
                                                 "63;16-90-32;0;0.6103442973824166;1\n"
                                                 "64;70-16-91-9-78-61-89-56-85-65-2-86-57-76-37-98-31-24-31-23-10-98-37-96-56-54;0;0.2269713662257693;1\n"
                                                 "65;74-43-83-49-54-87-34-57-33-99-80-19-18-46-90-27-50-47-6-92-76-23-89-72-35-57-1-25-65-72-8;0;0.23017947507646952;0\n"
                                                 "66;32-34-48-13-94-23-21-33-10-30-13-86;0;0.5465913300813012;1\n"
                                                 "67;22;1;0.051986928560018186;1\n"
                                                 "68;57-37-95-49-76-49-22-24-8-22-1-61-47-32-5-64-33-63-70-76-50-27-27-27-90-28-34-28-19-47-85-44-35-41-96-3-10;0;0.3087690292689418;0\n"
                                                 "69;47-90-53-87-10-48-51-85-2-16-0-88;0;0.18119860345688532;0\n"
                                                 "70;8-54-96-27-23-85-48-68-24-86-43-6-24-48-6-15-93-68-70-16-33-47-97-8-93-89-62;0;0.22697717188197186;0\n"
                                                 "71;60-60-97-47-60-82-3-80-56-31-36-50-60-61-77-98-68-49-4-74-57-57-56-93-48-4-26-82-71-38-51-40-83-7-6-72-7;1;0.828573946500621;0\n"
                                                 "72;54-86-72-67-15-17-56-38-76-11-39-94-0-44-78-0-17-12-13-30-77-58-78-90-89-71-9-35-23-3-73-16-94-23-7-60-69-8-29-87-82-15-14-55-32;0;0.16568665556010376;0\n"
                                                 "73;79-9-51-94-22-26-2-23-18-3-69-91-68-65-77-95-69;0;0.9893418696647425;0\n"
                                                 "74;48-2-19-84-41-90-23-81-48-17-97-41-0-56-94-21-63-93-80-47-22-77-41-48-58-38-9-2-1-82-52-99-81-4-31-31-48-94-56-86-67-15;1;0.19794490690881406;0\n"
                                                 "75;43-48-12-86-7-53-51-75-1-6-34-22-11-53-50-54-62-36-13-58-21-85;1;0.7501408943692952;0\n"
                                                 "76;80-85-89-92-67-67-88-19-85;1;0.01345058520604081;1\n"
                                                 "77;41-31-51-42-12-9-80-50-47-47-91-74-57-63-49-55-72-33-38-67-21-28-92-87-72-24-15-94-64-41;0;0.21399116805209928;0\n"
                                                 "78;57-96-57-45-18-81-7-22-80-71-50-97-87-36-20-96-68-0-50-75-71-98-71-25-20-25-19-9-49-37-86-51-19-75-22-2-84-0-89-74-42-62-96-15-62-44-69;1;0.3407836408049978;1\n"
                                                 "79;13-57-56-58-85-70-0-22-88-81-80-16-85-49-15-65-7-13-54-80-11-89-92-17-30-54;1;0.20473535772419582;0\n"
                                                 "80;49-43-18-54-29-73-66-6-4-11-41-77-28-23-12-6-25-68-8-14-24-20-44-8-10-47-6-40-22-43-2-7-99-15-29-56-21-61-52-74-14-39-31-11;1;0.024797676014503223;0\n"
                                                 "81;93-76-1-29-96-97-81-30-64-10-43-37-86-33-77-74-43-99-84-99-81-4-31-74-66;0;0.09214280205607805;0\n"
                                                 "82;24-20-52-88-56-22-65-73-37-99-9-2-44-16-56-82;1;0.9724017062273549;0\n"
                                                 "83;98-86-62-88-23-54-32-86-92-60-41-37-94-21-0-27-11-79-41-88-11-48-64-78-41-3-2-84-27-65-14-45-39-62-33-23-33-6-94-22-12-16-61-32-43-34-13-70-16-67;1;0.9691829827067809;1\n"
                                                 "84;48-22-90-68-43-40-90-76-34-66-81-28-67-20-88-93-99-73-66-77-70-98-42-22-34-10-10-78-58-42-81-8-0-24-17-92-61-26-29-44-83-27-45-57-30;0;0.7093608806270907;1\n"
                                                 "85;31-37-55-42-69-82-21-91-83-98-28-84-61-34-85-26-36-96-13-82-58-87-67-28-11-40-59-97-60-6-21-19;1;0.018636517251366835;1\n"
                                                 "86;55-26-2-3-66-57-60-65-88-60-92-32-19-41-56-57-98-94-70-81-64-20-67-94-42-11-24-89-23-5-91-21-40-23-96-51-89-16-90-4-36-88-97;1;0.3977978766020108;1\n"
                                                 "87;0-6-21-17-95-77-88-80-73-54-58-3-87-41-0-5-24-3-81-55-1-63-77-89-4-78-73-7-31-69-18-11-53-15-78;1;0.6761120446364912;0\n"
                                                 "88;39-11-23-70-2-37-17-58-88-12-90-53-67-27-28-73-30-83-3-56-93-17-3-66-96-86-0-70-55-34-62-26-97-59-33-48-6-61-45-14-44-2;0;0.25413748211641607;1\n"
                                                 "89;22-37-16-28-79-70-33-62-26-63-90-2-30-4-43-30-96-19-8-76-93-1-9-31-97-98-97-40-18-46-53-29-47-93-10-94-61-45-3-26-48-22-29-2-65-17-93;1;0.6880116123434429;0\n"
                                                 "90;33-83-30-14-34-55-9-86-30-81-5-18-64-69;1;0.6299327113635589;1\n"
                                                 "91;15-88-57-69-91-79-55-2-57-79-73-34-38-95-9-22-70-88-3-26-72-31-6-10-16-50-35-54-71-97-5-43-77-92-35-19-28-40-25;1;0.41089107956176363;0\n"
                                                 "92;50-78-89-94-20-70-80-29-4-41-9-99-29-64-98-21-9-23-33-8-53-44-98-92-98-78-74-34-0-3-34-19-24;0;0.23829297784694947;1\n"
                                                 "93;86-72-66-98-23-31-78-63-33-67-87-56-72-61-44-97-26-89-74-15-38-72-32-49-68-17-28-91-31-27-32-61-85-23-44-79-55-47-25-72-73-8-53-58-39-91-59-98-7-14;0;0.05444861088647501;1\n"
                                                 "94;48-65-39-71-0-43-41-92-47-99-62-10-76;0;0.7890208426510691;0\n"
                                                 "95;82-39-32-93-56-20-28-19-21-13-81-58-18-50-95-88-75-61-57-37-67-58-37-55-73-99-30-38-82-64-54-89-47-85-57-66-76-67-65-3-9-82;0;0.8559686100241589;0\n"
                                                 "96;79-68-57-24-95-10-51-52-38-96-38-61-1-18-0-82-12-7-17-38-85-5;0;0.23037945989608977;1\n"
                                                 "97;68-9-14-42-20-97-90-13-27;1;0.21866018237961193;1\n"
                                                 "98;0-51-52-49-24-0-48-26-76-13-51-74-6-48-61-20-11-27-23-44-58-20-16-66-50-79-13-12-48-94-5;1;0.38515077448971036;0\n"
                                                 "99;57-34-0-2-3-75-39-7;1;0.8559902605332768;0\n")));

    ASSERT(!string_to_file("worlds_bigger.csv", ("0;fi;7.778394871020154\n"
                                                 "1;restaurant;2.409421434074852\n"
                                                 "2;fastFood;0.2987484197387358\n"
                                                 "3;restaurant;8.001400598132458\n"
                                                 "4;someplace;5.810659699982933\n"
                                                 "5;fastFood;2.5569142555489046\n"
                                                 "6;fastFood;9.894862732829464\n"
                                                 "7;albert;8.110511168582681\n"
                                                 "8;busStop;6.7338405790331715\n"
                                                 "9;fi;6.261278648979847\n"
                                                 "10;gym;1.0254663371622186\n"
                                                 "11;fastFood;3.6929954537722596\n"
                                                 "12;church;1.4525389622915075\n"
                                                 "13;gym;3.991087537566178\n"
                                                 "14;cinema;3.644254348202468\n"
                                                 "15;fi;0.14043911402243037\n"
                                                 "16;trainStation;6.90296647115545\n"
                                                 "17;cinema;0.688827274515702\n"
                                                 "18;trainStation;8.80531017861085\n"
                                                 "19;fi;3.1742624632348537\n"
                                                 "20;fi;3.3853559658715024\n"
                                                 "21;hell;8.751475525243018\n"
                                                 "22;mordor;3.071067346266684\n"
                                                 "23;somewhere;0.5307164596310154\n"
                                                 "24;hell;1.5351282003896127\n"
                                                 "25;someplace;7.056566209102386\n"
                                                 "26;mordor;1.8402149350516028\n"
                                                 "27;albert;8.447799328176808\n"
                                                 "28;fi;7.380401948774572\n"
                                                 "29;church;6.820681887237052\n"
                                                 "30;cinema;2.0320276243620894\n"
                                                 "31;albert;8.406826906914969\n"
                                                 "32;somewhere;2.5052589790971966\n"
                                                 "33;fi;3.822777094483966\n"
                                                 "34;someplace;2.995877246382862\n"
                                                 "35;fi;0.13334845638300785\n"
                                                 "36;albert;8.114711167170325\n"
                                                 "37;fi;4.491370697766327\n"
                                                 "38;church;6.497357141249129\n"
                                                 "39;albert;6.23707652149902\n"
                                                 "40;cafe;5.763248756390395\n"
                                                 "41;hell;8.62432811484602\n"
                                                 "42;gym;0.7824557450635283\n"
                                                 "43;fastFood;4.277603425084026\n"
                                                 "44;busStop;5.800658738737219\n"
                                                 "45;hell;3.242897191166726\n"
                                                 "46;fi;8.502950526605746\n"
                                                 "47;cafe;3.255388193336243\n"
                                                 "48;restaurant;9.197604055172393\n"
                                                 "49;busStop;7.36774380130517\n"
                                                 "50;hell;4.674292887922011\n"
                                                 "51;gym;2.1930807612527414\n"
                                                 "52;mordor;2.663032167663577\n"
                                                 "53;church;4.3654600874323\n"
                                                 "54;church;6.887696363555973\n"
                                                 "55;somewhere;9.384765571279436\n"
                                                 "56;restaurant;7.9098563345544415\n"
                                                 "57;someplace;8.113959724542555\n"
                                                 "58;cafe;7.9226530255170715\n"
                                                 "59;cafe;4.313781718784554\n"
                                                 "60;somewhere;5.275022480494657\n"
                                                 "61;mordor;7.166253942730804\n"
                                                 "62;mordor;3.8951790011898235\n"
                                                 "63;albert;5.153259531021042\n"
                                                 "64;cinema;5.625331831816583\n"
                                                 "65;mordor;3.979191999188826\n"
                                                 "66;mordor;9.951054944837585\n"
                                                 "67;church;2.222224703407687\n"
                                                 "68;somewhere;8.036041714742105\n"
                                                 "69;restaurant;5.081270389440197\n"
                                                 "70;busStop;2.1717378903786977\n"
                                                 "71;busStop;9.296599732290856\n"
                                                 "72;restaurant;4.184034144451896\n"
                                                 "73;restaurant;4.430060871048398\n"
                                                 "74;fastFood;4.687946502389878\n"
                                                 "75;fastFood;9.963685817433637\n"
                                                 "76;busStop;4.575215801530267\n"
                                                 "77;trainStation;7.210604220691711\n"
                                                 "78;hell;1.61295325847287\n"
                                                 "79;somewhere;1.862106012675433\n"
                                                 "80;someplace;1.777518419052233\n"
                                                 "81;church;1.5615235369768998\n"
                                                 "82;restaurant;4.963869855808582\n"
                                                 "83;hell;0.8773708050002815\n"
                                                 "84;busStop;8.778499871266268\n"
                                                 "85;restaurant;4.147446403807999\n"
                                                 "86;mordor;5.160473706628757\n"
                                                 "87;hell;0.23792609815002308\n"
                                                 "88;busStop;2.0519241883254247\n"
                                                 "89;cafe;8.350084720784828\n"
                                                 "90;cinema;8.844260189590619\n"
                                                 "91;albert;2.9457622081294312\n"
                                                 "92;cafe;8.349020140570929\n"
                                                 "93;albert;3.1259362829404704\n"
                                                 "94;someplace;8.825255927539704\n"
                                                 "95;albert;6.4941643465699075\n"
                                                 "96;someplace;4.575797455006243\n"
                                                 "97;church;9.71514097522626\n"
                                                 "98;someplace;2.1777530031394843\n"
                                                 "99;fastFood;5.5136834650270705\n")));
}

static void tear_down()
{
    remove("agents_sample.csv");
    remove("worlds_village.csv");
    remove("agents_bigger.csv");
    remove("worlds_bigger.csv");
}

TEST(nanecisto)
{
    set_up();

    // #desc: nanecisto/example: Vzorové vstupy
    SUBTEST(example)
    {
        ARGS("pandemic", "--random-seed", "42", "./agents_sample.csv", "./worlds_village.csv");
        CHECK(student_main(argc, argv) == 0);

        ASSERT_FILE(stdout, ("Random seed: 42\n"
                             "Virus is extinct.\n"
                             "Statistics:\n"
                             "	Total infections: 0\n"
                             "	Total deaths: 2\n"
                             "	Number of survivors: 3\n"
                             "Most infectious location:\n"
                             "	Multiple\n"
                             "Simulation terminated after 1 steps.\n"));

        remove("agents_sample.csv");
        remove("worlds_village.csv");
    }

    // #desc: nanecisto/example_with_args: Vzorové vstupy s argumentmi naviac
    SUBTEST(example_with_args)
    {
        ARGS("pandemic", "--random-seed", "1337", "--lethality", "0.8", "./agents_sample.csv", "./worlds_village.csv");
        CHECK(student_main(argc, argv) == 0);

        ASSERT_FILE(stdout, ("Random seed: 1337\n"
                             "Virus is extinct.\n"
                             "Statistics:\n"
                             "	Total infections: 0\n"
                             "	Total deaths: 2\n"
                             "	Number of survivors: 3\n"
                             "Most infectious location:\n"
                             "	Multiple\n"
                             "Simulation terminated after 1 steps.\n"));
    }

    // #desc: nanecisto/invalid_arg: Neplatný argument na vstupe
    SUBTEST(invalid_arg)
    {
        ARGS("pandemic", "--random-seed", "LOL", "./agents_sample.csv", "./worlds_village.csv");
        CHECK(student_main(argc, argv) != 0);
    }

    // #desc: nanecisto/missing_arg: Chýbajúci argument na vstupe
    SUBTEST(missing_arg)
    {
        ARGS("pandemic");
        CHECK(student_main(argc, argv) != 0);
    }

    // #desc: nanecisto/bigger_example: Väčší vstup
    SUBTEST(bigger_example)
    {
        ARGS("pandemic", "--random-seed", "145", "./agents_bigger.csv", "./worlds_bigger.csv");
        CHECK(student_main(argc, argv) == 0);

        ASSERT_FILE(stdout, ("Random seed: 145\n"
                             "Virus is extinct.\n"
                             "Statistics:\n"
                             "	Total infections: 14\n"
                             "	Total deaths: 43\n"
                             "	Number of survivors: 57\n"
                             "Most infectious location:\n"
                             "	Multiple\n"
                             "Simulation terminated after 4 steps.\n"));
    }

    tear_down();
}
